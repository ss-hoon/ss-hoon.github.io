---
title: Item 19. ìƒì†ì„ ê³ ë ¤í•´ ì„¤ê³„í•˜ê³  ë¬¸ì„œí™”í•˜ë¼. ê·¸ëŸ¬ì§€ ì•Šì•˜ë‹¤ë©´ ìƒì†ì„ ê¸ˆì§€í•˜ë¼
categories: [Effective-Java]
tags: [ìƒì†]
toc: true

date: 2022-06-27
last_modified_at: 2022-07-01
---

## 1. ë“¤ì–´ê°€ê¸°

Item 18ì—ì„œëŠ” ìƒì†ì„ ì—¼ë‘ì— ë‘ì§€ ì•Šê³  ì„¤ê³„í•œ í´ë˜ìŠ¤ë¥¼ ìƒì†í–ˆì„ ë•Œì˜ ë¬¸ì œì ì„ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ìƒì†ì„ ì—¼ë‘ì— ë‘” í´ë˜ìŠ¤ë¥¼ ì–´ë–»ê²Œ íŒë‹¨í•  ìˆ˜ ìˆì„ê¹Œìš”? ğŸ¤”

ì´ë²ˆ Itemì—ì„œëŠ” ì–´ë–¤ í´ë˜ìŠ¤ë¥¼ ìƒì†í•´ì•¼ í•˜ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## 2. ìƒì†ì„ ì—¼ë‘ì— ë‘” í´ë˜ìŠ¤ë¥¼ íŒë‹¨í•˜ëŠ” ë°©ë²•

> ğŸ¯ ë©”ì„œë“œì˜ ì‚¬ìš©ë²•ì„ ë¬¸ì„œë¡œ ë‚¨ê¸´ í´ë˜ìŠ¤

ìƒì†ì„ ì—¼ë‘ì— ë‘” í´ë˜ìŠ¤ëŠ” ëŒ€í‘œì ìœ¼ë¡œ ì¬ì •ì˜ ê°€ëŠ¥í•œ ë©”ì„œë“œë“¤ì˜ ì‚¬ìš©ë²•ì„ ë¬¸ì„œë¡œ ë‚¨ê²¨ë†“ìŠµë‹ˆë‹¤.

ëŒ€í‘œì ì¸ ì˜ˆë¡œ java.util.AbstractCollectionì˜ remove ë©”ì„œë“œê°€ ìˆìŠµë‹ˆë‹¤.

```java
  /**
    * {@inheritDoc}
    *
    * @implSpec
    * This implementation iterates over the collection looking for the
    * specified element.  If it finds the element, it removes the element
    * from the collection using the iterator's remove method.
    *
    * <p>Note that this implementation throws an
    * {@code UnsupportedOperationException} if the iterator returned by this
    * collection's iterator method does not implement the {@code remove}
    * method and this collection contains the specified object.
    *
    * @throws UnsupportedOperationException {@inheritDoc}
    * @throws ClassCastException            {@inheritDoc}
    * @throws NullPointerException          {@inheritDoc}
    */
  public boolean remove(Object o) { ... }
```

API ë¬¸ì„œì˜ ë©”ì„œë“œ ì„¤ëª… ëì— ì¢…ì¢… "Implementation Requirements"ë¡œ ì‹œì‘í•˜ëŠ” ì ˆì„ ë³¼ ìˆ˜ ìˆëŠ”ë°

ê·¸ ë¶€ë¶„ì´ ë©”ì„œë“œì˜ ë‚´ë¶€ ë™ì‘ ë°©ì‹ì„ ì„¤ëª…í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.

remove ë©”ì„œë“œì—ì„œëŠ” ì•„ë˜ ë¶€ë¶„ì´ Implementation Requirementsì— í•´ë‹¹ë©ë‹ˆë‹¤.

```
  @implSpec
  This implementation iterates over the collection looking for the
  specified element.  If it finds the element, it removes the element
  from the collection using the iterator's remove method.

  <p>Note that this implementation throws an
  {@code UnsupportedOperationException} if the iterator returned by this
  collection's iterator method does not implement the {@code remove}
  method and this collection contains the specified object.
```

iterator ë©”ì„œë“œê°€ ë°˜í™˜í•œ ë°˜ë³µìê°€ remove ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì˜ˆì™¸ë¥¼ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ëœ»ìœ¼ë¡œ

iterator ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•˜ë©´ remove ë©”ì„œë“œì˜ ë™ì‘ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ğŸ¯ í´ë˜ìŠ¤ ë‚´ë¶€ ë™ì‘ ê³¼ì •ì— ë¼ì–´ë“¤ ìˆ˜ ìˆëŠ” í›…(hook)ì„ ì„ ë³„í•´ protected ë©”ì„œë“œë¡œ ê³µê°œí•œ í´ë˜ìŠ¤

ëŒ€í‘œì ì¸ ì˜ˆë¡œ java.util.AbstractListì˜ removeRange ë©”ì„œë“œê°€ ìˆìŠµë‹ˆë‹¤.

```java
  /**
    * Removes from this list all of the elements whose index is between
    * {@code fromIndex}, inclusive, and {@code toIndex}, exclusive.
    * Shifts any succeeding elements to the left (reduces their index).
    * This call shortens the list by {@code (toIndex - fromIndex)} elements.
    * (If {@code toIndex==fromIndex}, this operation has no effect.)
    *
    * <p>This method is called by the {@code clear} operation on this list
    * and its subLists.  Overriding this method to take advantage of
    * the internals of the list implementation can <i>substantially</i>
    * improve the performance of the {@code clear} operation on this list
    * and its subLists.
    *
    * @implSpec
    * This implementation gets a list iterator positioned before
    * {@code fromIndex}, and repeatedly calls {@code ListIterator.next}
    * followed by {@code ListIterator.remove} until the entire range has
    * been removed.  <b>Note: if {@code ListIterator.remove} requires linear
    * time, this implementation requires quadratic time.</b>
    *
    * @param fromIndex index of first element to be removed
    * @param toIndex index after last element to be removed
    */
  protected void removeRange(int fromIndex, int toIndex) { ... }
```

í•´ë‹¹ ì½”ë“œì—ì„œ ì£¼ì˜ ê¹Šê²Œ ë´ì•¼í•  ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```
  <b>Note: if {@code ListIterator.remove} requires linear
  time, this implementation requires quadratic time.</b>
```

ListIterator.removeê°€ ì„ í˜• ì‹œê°„ì´ ê±¸ë¦¬ë©´ ì´ êµ¬í˜„ì˜ ì„±ëŠ¥ì€ ì œê³±ì— ë¹„ë¡€í•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.

List êµ¬í˜„ì²´ì˜ ìµœì¢… ì‚¬ìš©ìëŠ” removeRange ë©”ì„œë“œì— ê´€ì‹¬ì´ ì—†ìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ì—ë„ í•´ë‹¹ ë©”ì„œë“œë¥¼ ì œê³µí•œ ì´ìœ ëŠ” í•˜ìœ„ í´ë˜ìŠ¤ì˜ clear ë©”ì„œë“œë¥¼ ê³ ì„±ëŠ¥ìœ¼ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤.

ë§Œì•½, removeRange ë©”ì„œë“œê°€ ì—†ë‹¤ë©´ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ clear ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ì„±ëŠ¥ì´ ë–¨ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.

> ğŸ¯ ìƒì„±ì ë‚´ë¶€ì—ì„œ ì¬ì •ì˜ ê°€ëŠ¥ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” í´ë˜ìŠ¤

ë°”ë¡œ ì˜ˆì‹œë¥¼ í†µí•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

```java
  public class Super {
    public Super() { overrideMethod(); }
    public void overrideMethod() {}
  }
```

```java
  public class Sub extends Super {
    private final Instant instant;

    Sub() { instant = Instant.now(); }

    @Override
    public void overrideMethod() {
      System.out.println(instant);
    }

    public static void main(String[] args) {
      Sub sub = new Sub();
      sub.overrideMethod();
    }
  }
```

í˜„ì¬ ìƒìœ„ í´ë˜ìŠ¤ì˜ ìƒì„±ìëŠ” ì¬ì •ì˜ìš© ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì´ í”„ë¡œê·¸ë¨ì˜ ê²°ê³¼ë¡œ instantê°€ ë‘ ë²ˆ ì¶œë ¥ë˜ë¦¬ë¼ ê¸°ëŒ€í–ˆìœ¼ë‚˜,

í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìƒì„±ë˜ê¸° ì „ ìƒìœ„ í´ë˜ìŠ¤ê°€ ë¨¼ì € ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ì²« ë²ˆì§¸ ì¶œë ¥ì€ nullì´ ë‚˜ì˜µë‹ˆë‹¤.

ë§Œì•½ overrideMethodì—ì„œ instantë¥¼ ì°¸ì¡°í•œë‹¤ë©´ NullPointerExceptionì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ğŸ¯ Clonableì´ë‚˜ Serializable ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì† ë°›ì§€ ì•ŠëŠ” í´ë˜ìŠ¤

Clonableì´ë‚˜ Serializableì„ í•˜ë‚˜ë¼ë„ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ìƒì†í•  ìˆ˜ ìˆê²Œ ì„¤ê³„í•˜ëŠ” ê²ƒì€

ê·¸ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ë ¤ëŠ” í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ ì—„ì²­ë‚œ ë¶€ë‹´ì„ ì§€ìš°ê¸° ë•Œë¬¸ì— ì¢‹ì§€ ì•Šì€ ìƒê°ì…ë‹ˆë‹¤.

ëŒ€ì‹ , ì´ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ ë§Œë“œëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

ìƒì„±ì ëŒ€ì‹  cloneì´ë‚˜ readObject ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì¸ë°ìš”.

ì´ ë‘ ë©”ì„œë“œëŠ” ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë§Œë“ ë‹¤ëŠ” ì ì—ì„œ ìƒì„±ìì™€ ë¹„ìŠ·í•œ íš¨ê³¼ë¥¼ ëƒ…ë‹ˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— cloneê³¼ readObject ë©”ì„œë“œ ë˜í•œ ì¬ì •ì˜ ê°€ëŠ¥ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  Serializableì„ êµ¬í˜„í•œ ìƒì†ìš© í´ë˜ìŠ¤ê°€ readResolveë‚˜ writeReplace ë©”ì„œë“œë¥¼ ê°–ëŠ”ë‹¤ë©´

í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ë¬´ì‹œë˜ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•´ private ëŒ€ì‹  protectedë¡œ ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤.

## 3. ìƒì†ìš© í´ë˜ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•

ì•ì„œ ìƒì†ì„ ì—¼ë‘ì— ë‘” í´ë˜ìŠ¤ë¥¼ íŒë‹¨í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ìš°ë¦¬ê°€ ìƒì†ìš© í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆì„ ë•Œ ê·¸ í´ë˜ìŠ¤ë¥¼ ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸í•˜ë©´ ì¢‹ì„ê¹Œìš”?

ìƒì†ìš© í´ë˜ìŠ¤ë¡œ ì í•©í•œì§€ ì•Œë ¤ì£¼ëŠ” ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë©´ ì¢‹ê² ì§€ë§Œ, ê·¸ëŸ° ë„êµ¬ëŠ” ì•„ì‰½ê²Œë„ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ê°€ì¥ ì¢‹ì€ ë°©ë²•ì´ì ìœ ì¼í•œ ë°©ë²•ì€ "ì§ì ‘ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ëŠ” ê²ƒ" ì…ë‹ˆë‹¤.

ê¼­ í•„ìš”í•œ protected ë©¤ë²„ë¥¼ ë†“ì³¤ë‹¤ë©´ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•  ë•Œ ë¹ˆìë¦¬ê°€ í™•ì—°íˆ ë“œëŸ¬ë‚©ë‹ˆë‹¤.

ë°˜ëŒ€ë¡œ, ì—¬ëŸ¬ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ë•Œê¹Œì§€ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” protected ë©¤ë²„ëŠ” privateì¼ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.

## 4. ì •ë¦¬

í´ë˜ìŠ¤ë¥¼ ìƒì†ìš©ìœ¼ë¡œ ì„¤ê³„í•˜ë ¤ë©´ ë§ì€ ë…¸ë ¥ì´ ë“¤ê³  ì œì•½ë„ ìƒë‹¹í•¨ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ìƒì†ìš©ìœ¼ë¡œ ì„¤ê³„í•˜ì§€ ì•Šì€ í´ë˜ìŠ¤ëŠ” ìƒì†ì„ ê¸ˆì§€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ìƒì†ì„ ê¸ˆì§€í•˜ëŠ” ë°©ë²•ìœ¼ë¡œëŠ” Item 17ì—ì„œ ì•Œì•„ë³´ì•˜ë“¯ì´ ë‘ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

* í´ë˜ìŠ¤ë¥¼ finalë¡œ ì„ ì–¸í•œë‹¤.

* ëª¨ë“  ìƒì„±ìë¥¼ privateì´ë‚˜ package-privateìœ¼ë¡œ ì„ ì–¸í•˜ê³  public ì •ì  íŒ©í„°ë¦¬ë¥¼ ë§Œë“ ë‹¤.

ìƒì† ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ Item 18ì—ì„œ ì•Œì•„ë³¸ ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤.

* Wrapper í´ë˜ìŠ¤ íŒ¨í„´

ë§Œì•½, ê¼­ ìƒì†ì„ í—ˆìš©í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤ë©´

í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œëŠ” ì¬ì •ì˜ ê°€ëŠ¥ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê²Œ ë§Œë“¤ê³ 

ìê¸° ì‚¬ìš© ì½”ë“œë¥¼ ì œê±°í•˜ë¼ëŠ” ë¬¸ì„œë¥¼ ë‚¨ê²¨ì•¼ í•©ë‹ˆë‹¤.