---
title: Item 19. 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라 (작성중)
categories: [Effective-Java]
tags: [상속]
toc: true
secret: true

date: 2022-06-27
last_modified_at: 2022-06-27
---

## 1. 들어가기

Item 18에서는 상속을 염두에 두지 않고 설계한 클래스를 상속했을 때의 문제점을 살펴보았습니다.

그럼 상속을 염두에 둔 클래스를 어떻게 판단할 수 있을까요? 🤔

이번 Item에서는 어떤 클래스를 상속해야 하는지 알아보겠습니다.

## 2. 상속을 염두에 둔 클래스를 판단하는 방법

🎯 메서드의 사용법을 문서로 남긴 클래스

상속을 염두에 둔 클래스는 대표적으로 재정의 가능한 메서드들의 사용법을 문서로 남겨놓습니다.

대표적인 예로 java.util.AbstractCollection의 remove 메서드가 있습니다.

```java
  /**
    * {@inheritDoc}
    *
    * @implSpec
    * This implementation iterates over the collection looking for the
    * specified element.  If it finds the element, it removes the element
    * from the collection using the iterator's remove method.
    *
    * <p>Note that this implementation throws an
    * {@code UnsupportedOperationException} if the iterator returned by this
    * collection's iterator method does not implement the {@code remove}
    * method and this collection contains the specified object.
    *
    * @throws UnsupportedOperationException {@inheritDoc}
    * @throws ClassCastException            {@inheritDoc}
    * @throws NullPointerException          {@inheritDoc}
    */
  public boolean remove(Object o) { ... }
```

API 문서의 메서드 설명 끝에 종종 "Implementation Requirements"로 시작하는 절을 볼 수 있는데

그 부분이 메서드의 내부 동작 방식을 설명하는 부분입니다.

remove 메서드에서는 아래 부분이 Implementation Requirements에 해당됩니다.

```
  @implSpec
  This implementation iterates over the collection looking for the
  specified element.  If it finds the element, it removes the element
  from the collection using the iterator's remove method.

  <p>Note that this implementation throws an
  {@code UnsupportedOperationException} if the iterator returned by this
  collection's iterator method does not implement the {@code remove}
  method and this collection contains the specified object.
```

iterator 메서드가 반환한 반복자가 remove 메서드를 구현하지 않는다면 예외를 발생할 수 있다는 뜻으로

iterator 메서드를 재정의하면 remove 메서드의 동작에 영향을 미치는 것을 알 수 있습니다.

확실히 이는 HashSet의 addAll 메서드가 add 메서드를 참조하는 사실을 알 수 없었던 것과 비교됩니다.

🎯 클래스 내부 동작 과정에 끼어들 수 있는 훅(hook)을 선별해 protected 메서드로 공개한 클래스