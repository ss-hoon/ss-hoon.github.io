---
title: Item 2. ìƒì„±ìì— ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë”ë¥¼ ê³ ë ¤í•˜ë¼
categories: [Effective-Java]
tags: [Web, Builder]
toc: true

date: 2022-04-09
last_modified_at: 2022-04-09
---

## 1. ë“¤ì–´ê°€ê¸°

ìƒì„±ìëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ìƒì„±ì ì˜¤ë²„ë¡œë”©ì„ í†µí•´ ì‹œê·¸ë‹ˆì²˜ê°€ ë‹¤ë¥¸ ì—¬ëŸ¬ ìƒì„±ìë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ë§¤ê°œë³€ìˆ˜ê°€ ì—¬ëŸ¬ ê°œ ìˆë‹¤ë©´ ì–´ë–»ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆì„ê¹Œìš”?

ì´ëŸ´ ë•Œ ê°œë°œìë“¤ì€ ë³´í†µ 'ì ì¸µì  ìƒì„±ì íŒ¨í„´' ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

ì ì¸µì  ìƒì„±ì íŒ¨í„´ì´ ë­˜ê¹Œìš”?

ì˜ˆì‹œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

```
    public class Person {
        private String name;
        private int age;
        private String job;
        private String hobby;

        Person(String name, int age) {
            this(name, age, null);
        }

        Person(String name, int age, String job) {
            this(name, age, job, null);
        }

        Person(String name, int age, String job, String hobby) {
            this.name = name;
            this.age = age;
            this.job = job;
            this.hobby = hobby;
        }
    }
```

ì´ë ‡ê²Œ ë§¤ê°œë³€ìˆ˜ë¥¼ í•˜ë‚˜ì”© ì ì¸µì ìœ¼ë¡œ ëŠ˜ë ¤ê°€ ìƒì„±ìë¥¼ êµ¬í˜„í•˜ëŠ” íŒ¨í„´ì´ 'ì ì¸µì  ìƒì„±ì íŒ¨í„´' ì…ë‹ˆë‹¤.

í•˜ì§€ë§Œ, ë§¤ê°œë³€ìˆ˜ê°€ 10ê°œ, 20ê°œê°€ ëœë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?

<div class="div-post-img">
  <img src="{{ site.url }}/assets/img/web/02/wtf.png" width="40%" height="30%" />
</div>

ë¶„ëª… ìƒì„±ìë§Œ ì‘ì„±í•˜ë‹¤ê°€ ì§€ì¹  ê²ƒì…ë‹ˆë‹¤.

ì¦‰, ì ì¸µì  ìƒì„±ì íŒ¨í„´ë„ ì“¸ ìˆ˜ëŠ” ìˆì§€ë§Œ, ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì–´ë µê³  ê°€ë…ì„±ë„ ë–¨ì–´ì§‘ë‹ˆë‹¤.

ì‹¬ì§€ì–´ ìœ„ì˜ ì˜ˆì‹œ ì½”ë“œì—ì„œ jobê³¼ hobbyì˜ ê°’ì„ ë°˜ëŒ€ë¡œ ë„£ì–´ë„

ì»´íŒŒì¼ëŸ¬ëŠ” ì•Œì§€ ëª»í•´ ëŸ°íƒ€ì„ì— ì—‰ëš±í•œ ë™ì‘ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.

ê·¸ëŸ¼ ë°©ë²•ì´ ì—†ëŠ”ê±¸ê¹Œìš”?

ì´ë²ˆì—ëŠ” ë˜ë‹¤ë¥¸ ëŒ€ì•ˆì¸ Java Beans íŒ¨í„´ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

Java Beans íŒ¨í„´ì€ ë¨¼ì €, ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ìë¡œ ê°ì²´ë¥¼ ë§Œë“  í›„ì—

setterë¥¼ í˜¸ì¶œí•´ ì›í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì„ ì„¤ì •í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì´ê²ƒë„ ì˜ˆì‹œë¥¼ í•œë²ˆ ë³´ê² ìŠµë‹ˆë‹¤.

```
    public class Person {
        private String name;
        private int age;
        private String job;
        private String hobby;

        public Person() {}

        public void setName(String name)    { this.name = name; }
        public void setAge(int age)         { this.age = age; }
        public void setJob(String job)      { this.job = job; }
        public void setHobby(String hobby)  { this.hobby = hobby; }
    }

    public static void main(String[] args) {
        Person person = new Person();

        person.setName("ì´ìƒí›ˆ");
        person.setAge(28);
        person.setJob("developer");
        person.setHobby("playing piano");
    }
```

í™•ì‹¤íˆ ì ì¸µì  ìƒì„±ì íŒ¨í„´ì— ë¹„í•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì‰½ê³ , ê°€ë…ì„±ì´ ì¢‹ì•„ì¡ŒìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, ê°ì²´ í•˜ë‚˜ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼í•˜ê³ 

ê°ì²´ê°€ ì™„ì „íˆ ìƒì„±ë˜ê¸° ì „ê¹Œì§€ëŠ” ì¼ê´€ì„±ì´ ë¬´ë„ˆì§„ ìƒíƒœì— ë†“ì´ê²Œ ë©ë‹ˆë‹¤.

ì´ ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ê°ì²´ë¥¼ ì™„ì „íˆ ìƒì„±í•˜ê¸° ì „ê¹Œì§€ëŠ” ì‚¬ìš©í•˜ì§€ ëª»í•˜ë„ë¡

freezingì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ

ì´ëŠ” ë‹¤ë£¨ê¸° ì–´ë ¤ì›Œ ì‹¤ì „ì—ì„œëŠ” ê±°ì˜ ì“°ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ë©”ì„œë“œë¥¼ ì ê²Œ í˜¸ì¶œí•˜ë©´ì„œ ì¼ê´€ì„±ì´ ìœ ì§€ë˜ëŠ” ë°©ë²•ì´ ì—†ëŠ”ê±¸ê¹Œìš”?

ì§€ê¸ˆë¶€í„° ë˜ í•˜ë‚˜ì˜ ëŒ€ì•ˆ Builderì— ëŒ€í•´ì„œ ì•Œì•„ë´…ì‹œë‹¤!

## 2. Builder

### 2-1. ì˜ë¯¸<br>

Builderê°€ ë¬´ì—‡ì¼ê¹Œìš”?

ë¨¼ì €, Builderì˜ ì‚¬ì „ì  ì˜ë¯¸ë¥¼ ì•Œì•„ë³´ë©´ "ê±´ì¶•ê°€" ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤.

ë‹¤ìŒ ì˜ˆì‹œë¥¼ ë³´ë©´ ì™œ Builderë¼ëŠ” ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

```
    public class Person {
        private String name;
        private int age;
        private String job;
        private String hobby;

        public static class Builder {
            private String name = null;
            private int age = 0;
            private String job = null;
            private String hobby = null;

            public Builder(String name, int age) {
                this.name = name;
                this.age = age;
            }

            public Builder job(String job) {
                this.job = job;
                return this;
            }

            public Builder hobby(String hobby) {
                this.hobby = hobby;
                return this;
            }

            public Person build() {
                return new Person(this);
            }
        }

        private Person(Builder builder) {
            this.name = builder.name;
            this.age = builder.age;
            this.job = builder.job;
            this.hobby = builder.hobby;
        }
    }

    public static void main(String[] args) {
        Person person = new Person.Builder("ì´ìƒí›ˆ", 28)
                                  .job("develop")
                                  .hobby("playing piano")
                                  .build();
    }
```

ì£¼ì˜ê¹Šê²Œ ë´ì•¼í•  ê³³ì€ main ë©”ì„œë“œ ë¶€ë¶„ì…ë‹ˆë‹¤.

ë¶€í’ˆ(job, hobby)ì„ í•˜ë‚˜ì”© ì¡°ë¦½í•˜ëŠ” ëŠë‚Œì´ ë“¤ì§€ ì•Šë‚˜ìš”?

Builderì˜ setter ë©”ì„œë“œë“¤ì€ Builder ìê¸° ìì‹ ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì—

ì˜ˆì‹œì™€ ê°™ì´ ì—°ì‡„ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ëŸ° ë°©ì‹ì„ ë©”ì„œë“œ í˜¸ì¶œì´ íë¥´ë“¯ ì—°ê²°ëœë‹¤ëŠ” ëœ»ìœ¼ë¡œ

Fluent API ë˜ëŠ” Method Chaining ì´ë¼ê³  í•©ë‹ˆë‹¤.

### 2-2. ì˜ˆì‹œ<br>

BuilderëŠ” ê³„ì¸µì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì“°ê¸°ì— ì¢‹ìŠµë‹ˆë‹¤.

ì˜ˆì‹œë¥¼ í†µí•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

```
/* Sushi.class */

    public abstract class Sushi {
        public enum Classification { NORMAL, ABURI, MAKI }
        Classification classification;

        abstract static class Builder<T extends Builder<T>> {
            Classification classification;
            public T addClassification(Classification classification) {
                this.classification = classification;
                return self();
            }

            abstract Sushi build();

            protected abstract T self();
        }

        Sushi(Builder builder) {
            this.classification = builder.classification;
        }
    }
```

```
/* NormalSushi.class */

    public class NormalSushi extends Sushi {
        public enum Neta { SAKE, ENGAWA, MAGURO }
        private Neta neta;

        public static class Builder extends Sushi.Builder<Builder> {
            private Neta neta;

            public Builder (Neta neta) {
                this.neta = Objects.requireNonNull(neta);
            }

            @Override
            public NormalSushi build() {
                return new NormalSushi(this);
            }

            @Override
            protected Builder self() {
                return this;
            }
        }

        private NormalSushi(Builder builder) {
            super(builder);
            neta = builder.neta;
        }
    }
```

```
/* AburiSushi.class */

    public class AburiSushi extends Sushi {
        public enum Neta { SAKE, EBI, HOTATEGAI, WAGYU }
        public enum Source { MAYO, HONEYMAYO, SOY, GARLIC }

        private Neta neta;
        private Source source;

        public static class Builder extends Sushi.Builder<Builder> {
            private Neta neta;
            private Source source;

            public Builder (Neta neta, Source source) {
                this.neta = Objects.requireNonNull(neta);
                this.source = Objects.requireNonNull(source);
            }

            @Override
            public AburiSushi build() {
                return new AburiSushi(this);
            }

            @Override
            protected Builder self() {
                return this;
            }
        }

        private AburiSushi(Builder builder) {
            super(builder);
            neta = builder.neta;
            source = builder.source;
        }
    }
```

í•´ë‹¹ ì˜ˆì‹œëŠ” ì˜ˆì „ì— ìŠ¤ì‹œì§‘ì—ì„œ ì•„ë¥´ë°”ì´íŠ¸í–ˆë˜ ê²½í—˜ì„ í† ëŒ€ë¡œ ë§Œë“¤ì–´ë´¤ìŠµë‹ˆë‹¤.

Sushi í´ë˜ìŠ¤ëŠ” ìŠ¤ì‹œì˜ ì¢…ë¥˜(ê¸°ë³¸ ìŠ¤ì‹œ, ì•„ë¶€ë¦¬ ìŠ¤ì‹œ, êµ°í•¨)ë¥¼ ê²°ì •í•˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

NormalSushi í´ë˜ìŠ¤ëŠ” ë„¤íƒ€(ìƒì„ íšŒ)ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ ê¸°ë³¸ ìŠ¤ì‹œë¡œ ë§Œë“œëŠ” êµ¬ì²´ í´ë˜ìŠ¤ì´ê³ ,

AburiSushi í´ë˜ìŠ¤ëŠ” ë„¤íƒ€ + ì†ŒìŠ¤ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ ì•„ë¶€ë¦¬ ìŠ¤ì‹œë¡œ ë§Œë“œëŠ” êµ¬ì²´ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

ê° í•˜ìœ„ í´ë˜ìŠ¤ì˜ Builderê°€ ì •ì˜í•œ build ë©”ì„œë“œëŠ” í•´ë‹¹í•˜ëŠ” êµ¬ì²´ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

ì¦‰, NormalSushi í´ë˜ìŠ¤ì˜ build ë©”ì„œë“œëŠ” ê¸°ë³¸ ìŠ¤ì‹œë¥¼ ë°˜í™˜í•˜ê³ 

AburiSushi í´ë˜ìŠ¤ì˜ build ë©”ì„œë“œëŠ” ì•„ë¶€ë¦¬ ìŠ¤ì‹œë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ê²ƒì´ì£ .

ì´ì œ, ìŠ¤ì‹œ ì¥ì¸ì´ ë˜ì–´ ìŠ¤ì‹œë¥¼ ë§Œë“¤ì–´ë³¼ê¹Œìš”?

<div class="div-post-img">
  <img src="{{ site.url }}/assets/img/web/02/sushi.jpg" width="40%" height="30%" />
</div>

ì €ëŠ” ë‘˜ ë‹¤ ì¢‹ì•„í•˜ë‹ˆê¹ ë‘˜ ë‹¤ ë§Œë“¤ì–´ë³¼ê²Œìš”!

ë¨¼ì €, ì—°ì–´ ìŠ¤ì‹œë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

```
    NormalSushi SakeNormalSushi = new NormalSushi.Builder(NormalSushi.Neta.SAKE)
                                                 .addClassification(Sushi.Classification.NORMAL)
                                                 .build();
```

<div class="div-post-img">
  <img src="{{ site.url }}/assets/img/web/02/sakeSushi.jpg" width="40%" height="30%" />
</div>

Normal ìŠ¤ì‹œë¥¼ ì„ íƒí•´ Builderì˜ ë§¤ê°œë³€ìˆ˜ì¸ ë„¤íƒ€ë¥¼ ì—°ì–´ë¡œ ì„ íƒí•´ ì—°ì–´ ìŠ¤ì‹œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

ë‹¤ìŒì€ ì™€ê·œ ìŠ¤ì‹œë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

```
    AburiSushi WagyuAburiSushi = new AburiSushi.Builder(AburiSushi.Neta.WAGYU, AburiSushi.Source.SOY)
                                               .addClassification(Sushi.Classification.ABURI)
                                               .build();
```

<div class="div-post-img">
  <img src="{{ site.url }}/assets/img/web/02/wagyuSushi.jpg" width="40%" height="30%" />
</div>

ì´ë²ˆì—ëŠ” Aburi ìŠ¤ì‹œë¥¼ ì„ íƒí•´

Builderì˜ ë§¤ê°œë³€ìˆ˜ì¸ ë„¤íƒ€ì™€ ì†ŒìŠ¤ë¥¼ ì™€ê·œì™€ ê°„ì¥ìœ¼ë¡œ ì„ íƒí•´ ì™€ê·œ ì•„ë¶€ë¦¬ ìŠ¤ì‹œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ Builderë¥¼ ì‚¬ìš©í•˜ë©´

ì½”ë“œì˜ ê°€ë…ì„±ì´ ë†’ì•„ì§ˆ ë¿ë§Œ ì•„ë‹ˆë¼, ê°ì²´ê°€ ìƒì„±ë˜ê¸° ì „ê¹Œì§€ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

BuilderëŠ” ìƒë‹¹íˆ ìœ ì—°í•©ë‹ˆë‹¤.

ì—¬ëŸ¬ ê°ì²´ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ë§Œë“¤ ìˆ˜ ìˆê³ , ë§¤ê°œë³€ìˆ˜ì— ë”°ë¼ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, ì´ëŸ° Builderë„ ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.

ì²« ë²ˆì§¸ë¡œ, ê°ì²´ë¥¼ ë§Œë“¤ê¸° ì „ Builderë¥¼ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.

Builderì˜ ìƒì„± ë¹„ìš©ì´ í¬ì§€ëŠ” ì•Šì§€ë§Œ,

ì„±ëŠ¥ì— ë¯¼ê°í•œ ìƒí™©ì—ì„œëŠ” ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‘ ë²ˆì§¸ë¡œ, ì ì¸µì  ìƒì„±ì íŒ¨í„´ë³´ë‹¤ ë§¤ê°œë³€ìˆ˜ê°€ ì‘ì€ ê²½ìš°, íš¨ìœ¨ì ì´ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ APIëŠ” ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§€ëŠ” ê²½í–¥ì´ ìˆê¸°ì—

ìœ ì§€ë³´ìˆ˜ë¥¼ ê³ ë ¤í–ˆì„ ë•Œ, Builderë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ë‚˜ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

## 3. ì •ë¦¬

ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ìƒì„±ìë¥¼ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

ê·¸ ì¤‘ íŠ¹íˆ ì ì¸µì  ìƒì„±ì íŒ¨í„´ë³´ë‹¤ ê°€ë…ì„±ì´ ì¢‹ìœ¼ë©´ì„œ

Java Beansë³´ë‹¤ í›¨ì”¬ ì•ˆì „í•œ Builderì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

ê·¸ë ‡ì§€ë§Œ Builderë„ ì„±ëŠ¥ì˜ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìƒí™©ì— ë§ê²Œ ì‚¬ìš©í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.

<div class="highlighter-rouge">
  <pre class="highlight">
    <code>
      ğŸ“• ê°œì¸ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.
      ğŸ˜Š ì˜¤íƒ€ë‚˜ ì˜ëª»ëœ ì •ë³´ê°€ ìˆì„ ê²½ìš° ëŒ“ê¸€ì´ë‚˜ ë©”ì¼ë¡œ ë§ì”€í•´ì£¼ì‹œë©´ ë°”ë¡œ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜Š</code>
  </pre>
</div>
