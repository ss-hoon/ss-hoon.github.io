---
title: Item 52. 다중정의는 신중히 사용하라
categories: [Effective-Java]
tags: [method]
toc: true
secret: true

date: 2023-04-17
last_modified_at: 2023-04-17
---

## 1. 들어가기

Java는 다중정의(Overloading, 오버로딩)를 제공합니다.

다중정의란, 서로 다른 시그니처를 갖는 여러 메소드를 같은 이름으로 정의하는 것인데

다중정의를 사용하면 하나의 이름만 사용하기 때문에 기억하기도 쉽고 오류 가능성을 줄일 수 있습니다.

하지만 다중정의를 잘못 사용하면 예기치 못한 오류 발생 가능성이 있습니다.

어떻게 사용하면 문제가 되는지 한번 살펴봅시다!

## 2. 잘못 사용한 다중정의

다음은 컬렉션을 집합, 리스트, 그 외로 구분하기 위한 프로그램입니다.

```java
   public class CollectionClassifier {
      public static String classify(Set<?> s) {
         return "집합";
      }

      public static String classify(List<?> lst) {
         return "리스트";
      }

      public static String classify(Collection<?> c) {
         return "그 외";
      }
   }

   public static void main(String[] args) {
        Collection<?>[] collections = {
                new HashSet<String>(),
                new ArrayList<BigInteger>(),
                new HashMap<String, String>().values()
        };

        for (Collection<?> c : collections)
            System.out.println(classify(c));
    }
```

```
=== 기대값 ===
   집합
   리스트
   그 외

=== 결과값 ===
   그 외
   그 외
   그 외
```

`collections` 배열에 집합, 리스트, Map이 들어있기 때문에 `집합`, `리스트`, `그 외`로 출력하리라 생각했지만,

실제로는 `그 외`만 세 번 연달아 출력합니다. 

왜 그런걸까요?? 🤔

바로, 다중정의의 메서드 호출은 런타임이 아닌 컴파일타임에 정해지기 때문입니다.

그래서 컴파일타임에는 반복문 내부의 c는 항상 `Collection<?>` 타입이므로

항상 세 번째 메서드인 `classify(Collection<?>)`만 호출하는 것입니다.

그럼 이런 문제는 어떻게 해결할 수 있을까요?

## 3. 잘못 사용한 다중정의 해결 방법

(작성중...)