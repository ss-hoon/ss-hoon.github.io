---
title: Spring Project AWS EC2ì— ë°°í¬í•˜ê¸° 1
categories: [AWS]
tags: ['AWS', 'EC2', 'S3', 'codecommit', 'codebuild', 'codedeploy']
toc: true

date: 2023-06-01
last_modified_at: 2023-06-07
---

## 1. ìƒ˜í”Œ í”„ë¡œì íŠ¸ ìƒì„±

AWS EC2ì— ë°°í¬í•  ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¥¼ í•œë²ˆ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.

1. Spring Boot í”„ë¡œì íŠ¸ ìƒì„±

   [[Spring Boot í”„ë¡œì íŠ¸ ìƒì„± í™ˆí˜ì´ì§€]](https://start.spring.io/){:target="_blank"}

   ![spring1]({{ site.url }}/assets/img/aws/aws-spring1.png)

2. Test Controller ì‘ì„±

   ì¶”í›„ ë°°í¬ í™•ì¸ì„ ìœ„í•´ `Hello World`ê°€ ë‚˜ì˜¤ë„ë¡ Controllerë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

   ```java
    package com.example.demo;

    import org.springframework.web.bind.annotation.GetMapping;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RestController;

    @RestController
    @RequestMapping("")
    public class MainController {

      @GetMapping("")
      public String main() {
        return "Hello World";
      }
    }
   ```

3. ì ‘ì† í™•ì¸

   í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•œ í›„, ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

   ![spring2]({{ site.url }}/assets/img/aws/aws-spring2.png)   

## 2. Codecommit

Codecommitì€ í”„ë¼ì´ë¹— Git Repositoryë¥¼ í˜¸ìŠ¤íŒ…í•˜ëŠ” í™•ì¥ì„±ì´ ë›°ì–´ë‚œ ê´€ë¦¬í˜• ì†ŒìŠ¤ ì œì–´ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

ì‰½ê²Œ ë§í•´ AWSì˜ Githubì´ë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.

ìš°ë¦¬ëŠ” ì•ì„œ ìƒì„±í•œ ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¥¼ Codecommitì˜ Repositoryì— ì—…ë¡œë“œí•´ë³¼ ê²ƒì…ë‹ˆë‹¤.

ê·¸ì „ì— Codecommitì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” IAM ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.

![codecommit4]({{ site.url }}/assets/img/aws/aws-codecommit4.png)

ì! ê·¸ëŸ¼ Repositoryë¥¼ ìƒì„±í•´ë´…ì‹œë‹¤.

1. Repository ìƒì„± ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.

   ![codecommit1]({{ site.url }}/assets/img/aws/aws-codecommit1.png)

2. Repository ì´ë¦„ì„ ì‘ì„±í•˜ê³  ìƒì„±ì„ ëˆ„ë¦…ë‹ˆë‹¤.

   ![codecommit2]({{ site.url }}/assets/img/aws/aws-codecommit2.png)

3. Repository ìƒì„± ì™„ë£Œ!

   ![codecommit3]({{ site.url }}/assets/img/aws/aws-codecommit3.png)

ì°¸ ì‰½ì£ ? ğŸ˜€

ë‹¤ìŒì€ ë§Œë“  Repositoryì— ìš°ë¦¬ì˜ ìƒ˜í”Œ í”„ë¡œì íŠ¸ë¥¼ ì—…ë¡œë“œí•´ë´…ì‹œë‹¤.

ì—…ë¡œë“œì—ëŠ” GRC(Git Remote Codecommit)ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.

GRCë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Pythonê³¼ Gitì„ ì„¤ì¹˜í•´ì£¼ì„¸ìš”!

![codecommit5]({{ site.url }}/assets/img/aws/aws-codecommit5.png)

ê·¸ë¦¬ê³  IAM ê³„ì •ì˜ ë³´ì•ˆ ìê²© ì¦ëª…ì—ì„œ Access Keyë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

![codecommit6]({{ site.url }}/assets/img/aws/aws-codecommit6.png)

![codecommit7]({{ site.url }}/assets/img/aws/aws-codecommit7.png)

![codecommit8]({{ site.url }}/assets/img/aws/aws-codecommit8.png)

![codecommit9]({{ site.url }}/assets/img/aws/aws-codecommit9.png)

Access Key ìƒì„± ê²°ê³¼ Access Keyì™€ Secret Access Keyë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Secret Access KeyëŠ” ì°½ì„ ë²—ì–´ë‚˜ë©´ ë‹¤ì‹œëŠ” í™•ì¸í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ csv íŒŒì¼ë¡œ ë‹¤ìš´ë°›ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ AWS CLIë¥¼ ì„¤ì¹˜í•´ë´…ì‹œë‹¤.

[[AWS CLI ì„¤ì¹˜]](https://awscli.amazonaws.com/AWSCLIV2.msi)

ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´ í”„ë¡¬í”„íŠ¸ ì°½ì„ ì—´ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ ìê²©ì¦ëª…ì„ ì§„í–‰í•©ë‹ˆë‹¤.

```shell
# AWS ìê²©ì¦ëª…
   aws configure

# AWS Access Key ID â†’ ì•ì„œ ë°œê¸‰ ë°›ì€ Access Key ì…ë ¥
# AWS Secret Access Key ID â†’ ì•ì„œ ë°œê¸‰ ë°›ì€ Secret Access Key ì…ë ¥
# Default region name â†’ ap-northeast-2
# Default output format â†’ json
```

ì™„ë£Œë˜ì—ˆìœ¼ë©´ ì•ì„œ ìƒì„±í–ˆë˜ í”„ë¡œì íŠ¸ì™€ Codecommitì˜ repositoryë¥¼ ì—°ê²°í•´ì¤ë‹ˆë‹¤.

```shell
# 1. cd ëª…ë ¹ì–´ë¥¼ í†µí•´ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™

# 2. git ì´ˆê¸°í™”
   git init

# 3. git remote ì—°ê²°
   git remote add origin codecommit::ap-northeast-2://code-repository

# 4. Stageì— í”„ë¡œì íŠ¸ ë°˜ì˜
   git add .

# 5. Commit
   git commit -m "init"

# 6. í”„ë¡œì íŠ¸ Push
   git push origin master
```

í”„ë¡œì íŠ¸ê°€ Codecommitì˜ repositoryì— ì—…ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

![codecommit10]({{ site.url }}/assets/img/aws/aws-codecommit10.png)

ì´ë ‡ê²Œ ì•ì„œ ìƒì„±í–ˆë˜ í”„ë¡œì íŠ¸ê°€ repositoryì— ì˜ ì—…ë¡œë“œëœ ê²ƒì´ ë³´ì¸ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤!

ë‹¤ìŒ í¬ìŠ¤íŠ¸ëŠ” Codecommitì— ì—…ë¡œë“œí•œ í”„ë¡œì íŠ¸ë¥¼ Build í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

â†’ [Spring Project AWS EC2ì— ë°°í¬í•˜ê¸° 2 (ì¤€ë¹„ì¤‘)]()